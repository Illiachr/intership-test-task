{"version":3,"sources":["webpack:///./module/removeEvent.js","webpack:///./module/render.js","webpack:///webpack/runtime/getFullHash"],"names":["removeEvent","events","eventSlot","eventSlotChildren","children","eventIndex","findIndex","event","id","dataset","eventId","splice","removeAttribute","classList","remove","classes","textContent","style","display","localStorage","eventStore","JSON","stringify","modalId","elem","popup","document","getElementById","add","closePopup","args","removeEventListener","clickHandler","e","target","name","removeEventApi","closest","contains","addEventListener","entityName","deleteData","res","console","log","status","warn","render","querySelectorAll","forEach","row","time","day","setAttribute","resetGrid","getEventStore","getItem","parse","getEventsFromApi","eventList","getData","json","data","obj","parsedData","item","push","length"],"mappings":"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","file":"main.212850b8fb4d7c57cd4e.hot-update.js","sourcesContent":["import { deleteData } from './apiUtils/apiUtils';\r\nimport { classes } from './auxiliary';\r\n\r\nconst removeEvent = (events, eventSlot) => {\r\n  const eventSlotChildren = eventSlot.children;\r\n  const eventIndex = events.findIndex(event => event.id === eventSlot.dataset.eventId);\r\n  events.splice(eventIndex, 1);\r\n  eventSlot.removeAttribute('data-event-id');\r\n  eventSlot.classList.remove(classes.slotBooked);\r\n  eventSlotChildren[0].textContent = '';\r\n  eventSlotChildren[1].style.display = 'none';\r\n  localStorage.eventStore = JSON.stringify(events);\r\n}; // end removeEvent\r\n\r\nexport default (modalId, elem, events) => {\r\n  const popup = document.getElementById(modalId);\r\n\r\n  popup.classList.add(classes.modalActive);\r\n\r\n  const closePopup = (...args) => {\r\n    popup.removeEventListener('click', args.clickHandler);\r\n    popup.classList.remove(classes.modalActive);\r\n  };\r\n\r\n  const clickHandler = e => {\r\n    const { target } = e;\r\n\r\n    if (target.name === 'yes') {\r\n      removeEventApi('events', events, elem);\r\n      closePopup(clickHandler);\r\n    }\r\n\r\n    if (target.closest(`.${classes.triggerClose}`) ||\r\n            target.classList.contains(classes.modalActive)\r\n    ) {\r\n      closePopup(clickHandler);\r\n    }\r\n  };\r\n\r\n  popup.addEventListener('click', clickHandler);\r\n};\r\n\r\nasync function removeEventApi(entityName, events, elem) {\r\n  try {\r\n    const res = await deleteData(entityName, elem.dataset.eventId);\r\n    console.log(res);\r\n    if (res.status === 204) {\r\n      removeEvent(events, elem);\r\n    }\r\n  } catch (err) {\r\n    console.warn(err);\r\n  }\r\n}\r\n","import { getData } from './apiUtils/apiUtils';\r\nimport { classes } from './auxiliary';\r\n\r\nexport const render = event => {\r\n  document.querySelectorAll('.row-meeting').forEach(row => {\r\n    if (event.time === row.dataset.time) {\r\n      row.querySelectorAll('.meeting-cell').forEach(eventSlot => {\r\n        if (eventSlot.dataset.day === event.day) {\r\n          const eventSlotChildren = eventSlot.children;\r\n          eventSlot.classList.add(classes.slotBooked);\r\n          eventSlot.classList.remove(classes.triggerOpen);\r\n          eventSlot.setAttribute('data-event-id', event.id);\r\n          eventSlot.setAttribute('draggable', true);\r\n          eventSlotChildren[0].textContent = event.name;\r\n          eventSlotChildren[1].style.display = 'inline';\r\n        }\r\n      });\r\n    }\r\n  });\r\n};\r\n\r\nexport const resetGrid = () => {\r\n  document.querySelectorAll('.row-meeting').forEach(row => {\r\n    row.querySelectorAll('.meeting-cell').forEach(eventSlot => {\r\n      const eventSlotChildren = eventSlot.children;\r\n      eventSlot.classList.remove(classes.slotBooked);\r\n      eventSlot.classList.add(classes.triggerOpen);\r\n      eventSlot.removeAttribute('data-event-id');\r\n      eventSlot.removeAttribute('draggable', true);\r\n      eventSlotChildren[0].textContent = '';\r\n      eventSlotChildren[1].style.display = 'none';\r\n    });\r\n  });\r\n};\r\n\r\nexport const getEventStore = () => {\r\n  let eventStore = [];\r\n  if (localStorage.getItem('eventStore')) {\r\n    eventStore = JSON.parse(localStorage.getItem('eventStore'));\r\n  }\r\n  return eventStore;\r\n};\r\n\r\nexport async function getEventsFromApi(events, entityName = 'events') {\r\n  const eventList = [];\r\n  console.log('Loading');\r\n  try {\r\n    const res = await getData(entityName);\r\n    console.log(res);\r\n    const data = await res.json();\r\n    console.log(data);\r\n    data.forEach(obj => {\r\n      const parsedData = JSON.parse(obj.data);\r\n      const item = { id: obj.id, ...parsedData };\r\n      eventList.push(item);\r\n    });\r\n    console.log(eventList);\r\n  } catch (err) {\r\n    console.warn(err);\r\n  } finally {\r\n    // eslint-disable-next-line no-param-reassign\r\n    events = eventList;\r\n    console.log(events);\r\n    if (events.length > 0) {\r\n      eventList.forEach(render);\r\n    }\r\n  }\r\n}\r\n","__webpack_require__.h = function() { return \"6b7b0b408cdf10010fa1\"; }"],"sourceRoot":""}