{"version":3,"sources":["webpack:///./module/addEvent.js","webpack:///./module/apiUtils/apiUtils.js","webpack:///webpack/runtime/getFullHash"],"names":["popupId","events","userList","day","time","popup","document","getElementById","eventForm","querySelector","warnMsg","classes","stateEventSlot","event","partisipants","isBooked","msg","processed","success","nameWarn","inputWarn","timeErr","regExpNameReplace","regExpNameTest","classList","add","select","Select","defaultSeleted","data","id","value","onSelect","selectedItems","members","length","reduce","total","item","forEach","selectItem","push","selectDay","placeholder","workWeek","remove","eventTimeTable","hour","eventHours","eventTime","selectTime","inputHandler","e","target","name","checkValue","test","children","textContent","replace","submitHandler","preventDefault","trim","selectionResult","storeEvent","localStorage","eventStore","JSON","stringify","closePopup","clickHandler","closest","contains","removeEventListener","destroy","reset","addEventListener","console","log","eventJson","postData","res","json","render","warn","url","getData","entityName","fetch","objInJson","method","headers","body","updateData","objInjson","deleteData"],"mappings":"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","file":"main.96498b1dc7e5c323915f.hot-update.js","sourcesContent":["import { postData } from './apiUtils/apiUtils';\r\nimport {\r\n  classes,\r\n  eventHours,\r\n  workWeek,\r\n} from './auxiliary';\r\nimport { render } from './render';\r\nimport Select from './UI/select/select';\r\n\r\n// const generateId = () => `e${(Math.trunc(Math.random() * 1e8)).toString(16)}`;\r\n\r\nexport default (popupId, events, userList, day = '', time = '') => {\r\n  const popup = document.getElementById(popupId);\r\n  const eventForm = popup.querySelector('#event-form');\r\n  const warnMsg = popup.querySelector(`.${classes.modalWarning}`);\r\n  const stateEventSlot = {\r\n    event: { partisipants: [] },\r\n    isBooked: false,\r\n  };\r\n\r\n  const msg = {\r\n    processed: 'Event store in progress...',\r\n    success: 'Event is stored',\r\n    nameWarn: 'Enter event name, please',\r\n    inputWarn: 'Only letters a-z and space, please',\r\n    timeErr: 'Failed to create event. This time is already booked',\r\n    regExpNameReplace: /[^a-z\\s]/gi,\r\n    regExpNameTest: /[a-z\\s]/gi,\r\n  };\r\n  popup.classList.add(classes.modalActive);\r\n\r\n  const select = new Select('#participants', {\r\n    defaultSeleted: '0',\r\n    data: [\r\n      { id: '0', value: 'All members' },\r\n      ...userList,\r\n    ],\r\n    onSelect(selectedItems) {\r\n      let members = [];\r\n      if (selectedItems.length <= 1 && selectedItems[0] === this.data[0].value) {\r\n        members = this.data.reduce((total, item) => {\r\n          selectedItems.forEach(selectItem => {\r\n            if (selectItem !== item.value) {\r\n              total.push(item);\r\n            }\r\n          });\r\n          return total;\r\n        }, []);\r\n      } else {\r\n        members = this.data.reduce((total, item) => {\r\n          selectedItems.forEach(selectItem => {\r\n            if (selectItem === item.value) {\r\n              total.push(item);\r\n            }\r\n          });\r\n          return total;\r\n        }, []);\r\n      }\r\n      stateEventSlot.event.partisipants = [...members];\r\n    },\r\n  }, true);\r\n\r\n  const selectDay = new Select('#day', {\r\n    placeholder: 'Choose day...',\r\n    defaultSeleted: day,\r\n    data: [\r\n      ...workWeek,\r\n    ],\r\n    onSelect(selectedItems) {\r\n      warnMsg.classList.remove('active');\r\n      stateEventSlot.event.day = selectedItems.id;\r\n    },\r\n  });\r\n\r\n  const eventTimeTable = [];\r\n  for (let hour = +eventHours.start; hour <= +eventHours.end; hour += +eventHours.step) {\r\n    const eventTime = { id: `${hour}`, value: `${hour}:00` };\r\n    eventTimeTable.push(eventTime);\r\n  }\r\n\r\n  const selectTime = new Select('#time', {\r\n    placeholder: 'Choose time...',\r\n    defaultSeleted: time,\r\n    data: eventTimeTable,\r\n    onSelect(selectedItems) {\r\n      warnMsg.classList.remove('active');\r\n      stateEventSlot.event.time = selectedItems.id;\r\n    },\r\n  });\r\n\r\n  const inputHandler = e => {\r\n    const { target } = e;\r\n\r\n    if (target === eventForm.name) {\r\n      const checkValue = msg.regExpNameTest.test(target.value);\r\n      if (checkValue) {\r\n        warnMsg.classList.remove('active');\r\n      } else {\r\n        warnMsg.children[1].textContent = msg.inputWarn;\r\n        warnMsg.classList.add('active');\r\n      }\r\n      target.value = target.value.replace(msg.regExpNameReplace, '');\r\n    }\r\n  };\r\n\r\n  const submitHandler = e => {\r\n    e.preventDefault();\r\n    stateEventSlot.isBooked = false;\r\n\r\n    if (eventForm.name.value.trim() === '') {\r\n      warnMsg.children[1].textContent = msg.nameWarn;\r\n      warnMsg.classList.add('active');\r\n      return;\r\n    }\r\n\r\n    stateEventSlot.event.name = eventForm.name.value;\r\n    select.selectionResult();\r\n    selectDay.selectionResult();\r\n    selectTime.selectionResult();\r\n\r\n    events.forEach(event => {\r\n      if (event.day === stateEventSlot.event.day && event.time === stateEventSlot.event.time) {\r\n        stateEventSlot.isBooked = true;\r\n      }\r\n    });\r\n\r\n    if (!stateEventSlot.isBooked) {\r\n      events.push(stateEventSlot.event);\r\n      storeEvent(stateEventSlot.event);\r\n      localStorage.eventStore = JSON.stringify(events);\r\n      closePopup();\r\n    } else {\r\n      warnMsg.children[1].textContent = msg.timeErr;\r\n      warnMsg.classList.add('active');\r\n    }\r\n  };\r\n\r\n  const clickHandler = e => {\r\n    const { target } = e;\r\n    if (target.closest(`.${classes.triggerClose}`) ||\r\n            target.classList.contains(classes.modalActive)\r\n    ) {\r\n      closePopup();\r\n    }\r\n\r\n    if (target.closest(`.${classes.modalWarning}`)) {\r\n      warnMsg.classList.remove('active');\r\n    }\r\n  };\r\n\r\n  function closePopup() {\r\n    popup.removeEventListener('click', clickHandler);\r\n    eventForm.removeEventListener('submit', submitHandler);\r\n    eventForm.removeEventListener('input', inputHandler);\r\n    select.destroy();\r\n    selectDay.destroy();\r\n    selectTime.destroy();\r\n    eventForm.reset();\r\n    warnMsg.classList.remove('active');\r\n    popup.classList.remove(classes.modalActive);\r\n  }\r\n\r\n  popup.addEventListener('click', clickHandler);\r\n  eventForm.addEventListener('input', inputHandler);\r\n  eventForm.addEventListener('submit', submitHandler);\r\n};\r\n\r\nasync function storeEvent(event) {\r\n  console.log('Event store in progress...');\r\n  const eventJson = JSON.stringify(event);\r\n  try {\r\n    const res = await postData('events', eventJson);\r\n    const data = await res.json();\r\n    console.log(data.id);\r\n    // eslint-disable-next-line no-param-reassign\r\n    event.id = data.id;\r\n    render(event);\r\n    console.log('New event stored');\r\n  } catch (err) {\r\n    console.warn(err);\r\n  }\r\n}\r\n","const url = 'http://158.101.166.74:8080/api/data/illia_cherkasov/';\r\n\r\nexport const getData = entityName => fetch(url + entityName);\r\n\r\nexport const postData = (entityName, objInJson) => fetch(\r\n  `${url}${entityName}`,\r\n  {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ data: objInJson }),\r\n  },\r\n);\r\n\r\nexport const updateData = (entityName, id, objInjson) => fetch(\r\n  `${url}${entityName}/${id}`,\r\n  {\r\n    method: 'PUT',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ data: objInjson }),\r\n  },\r\n);\r\n\r\nexport const deleteData = (entityName, id) => fetch(\r\n  `${url}${entityName}/${id}`,\r\n  {\r\n    method: 'DELETE',\r\n  },\r\n);\r\n","__webpack_require__.h = function() { return \"212850b8fb4d7c57cd4e\"; }"],"sourceRoot":""}