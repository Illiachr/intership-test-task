{"version":3,"sources":["webpack:///./module/Calendar/Calendar.js","webpack:///./module/addEvent.js","webpack:///./module/appTemplate/appTemplate.js","webpack:///./module/removeEvent.js","webpack:///./module/render.js","webpack:///webpack/runtime/getFullHash"],"names":["Calendar","selector","user","userList","events","root","document","querySelector","addEventBtn","filtred","handlers","click","dragNdrop","activeEvents","init","length","forEach","render","rights","right","getMethodName","clickListener","clickHandler","e","target","handler","addEventListener","console","log","filter","filterByUser","bind","filterByMember","Select","label","placeholder","defaultSeleted","data","id","value","onSelect","item","newEvent","push","style","display","rmEvent","dataTransfer","dragTarget","closest","classes","setData","dataset","eventId","targetBooked","classList","add","preventDefault","remove","getData","eventIndex","findIndex","event","time","day","updateEvent","resetGrid","reduce","arr","partisipants","member","elem","targetElem","firstFree","firstFreeSlot","modalId","modal","addEvent","eventSlot","removeEvent","warn","eventName","capitalize","eventJson","JSON","stringify","updateData","res","text","localStorage","eventStore","popupId","popup","getElementById","eventForm","warnMsg","stateEventSlot","isBooked","msg","processed","success","nameWarn","inputWarn","timeErr","regExpNameReplace","regExpNameTest","select","selectedItems","members","total","selectItem","selectDay","workWeek","eventTimeTable","hour","eventHours","eventTime","selectTime","inputHandler","name","checkValue","test","children","textContent","replace","submitHandler","trim","selectionResult","storeEvent","closePopup","contains","removeEventListener","destroy","reset","postData","json","appTemplate","app","template","loader","lds","body","append","insertAdjacentHTML","modalTemplates","getList","resEvents","status","obj","parsedData","parse","Error","showGrid","userAuth","eventSlotChildren","splice","removeAttribute","args","removeEventApi","entityName","deleteData","querySelectorAll","row","setAttribute","getEventStore","getItem","getEventsFromApi","eventList"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEqBA,Q;AACnB,oBAAYC,QAAZ,EAAsBC,IAAtB,EAA4BC,QAA5B,EAAsCC,MAAtC,EAA8C;AAAA;;AAC5C,SAAKC,IAAL,GAAYC,QAAQ,CAACC,aAAT,CAAuBN,QAAvB,CAAZ;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AACA,SAAKK,WAAL,GAAmB,KAAKH,IAAL,CAAUE,aAAV,CAAwB,yBAAxB,CAAnB;AAEA,SAAKH,MAAL,GAAcA,MAAM,IAAI,EAAxB;AACA,SAAKK,OAAL,GAAe,EAAf;AAEA,SAAKC,QAAL,GAAgB;AACdC,WAAK,EAAE,EADO;AAEdC,eAAS,EAAE;AAFG,KAAhB;AAKA,SAAKC,YAAL,GAAoB,EAApB;AAEA,SAAKC,IAAL;AACD;;;;WAED,gBAAO;AAAA;;AACL,UAAI,KAAKV,MAAL,CAAYW,MAAZ,GAAqB,CAAzB,EAA4B;AAC1B,aAAKX,MAAL,CAAYY,OAAZ,CAAoBC,2CAApB;AACD;;AACD,WAAKf,IAAL,CAAUgB,MAAV,CAAiBF,OAAjB,CAAyB,UAAAG,KAAK;AAAA,eAAI,KAAI,CAACC,aAAa,CAACD,KAAD,CAAd,CAAJ,EAAJ;AAAA,OAA9B;AACA,WAAKE,aAAL;AACD;;;WAED,yBAAgB;AAAA;;AACd,UAAMC,YAAY,GAAG,SAAfA,YAAe,CAAAC,CAAC,EAAI;AAAA,YAChBC,MADgB,GACLD,CADK,CAChBC,MADgB;;AAExB,cAAI,CAACd,QAAL,CAAcC,KAAd,CAAoBK,OAApB,CAA4B,UAAAS,OAAO;AAAA,iBAAI,MAAI,CAACA,OAAD,CAAJ,CAAcD,MAAd,CAAJ;AAAA,SAAnC;AACD,OAHD;;AAKA,WAAKnB,IAAL,CAAUqB,gBAAV,CAA2B,OAA3B,EAAoCJ,YAApC;AACD;;;WAED,oBAAW;AAAA,UACDnB,QADC,GACY,IADZ,CACDA,QADC;AAETwB,aAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBzB,QAAzB;AACA,UAAM0B,MAAM,GAAG,KAAKC,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAAf,CAHS,CAIT;;AACA,UAAMC,cAAc,GAAG,IAAIC,sDAAJ,CAAW,SAAX,EAAsB;AAC3CC,aAAK,EAAE,QADoC;AAE3CC,mBAAW,EAAE,kBAF8B;AAG3CC,sBAAc,EAAE,GAH2B;AAI3CC,YAAI,GACF;AAAEC,YAAE,EAAE,GAAN;AAAWC,eAAK,EAAE;AAAlB,SADE,4BAECpC,QAFD,EAJuC;AAQ3CqC,gBAR2C,oBAQlCC,IARkC,EAQ5B;AACbd,iBAAO,CAACC,GAAR,CAAYa,IAAZ;AACAZ,gBAAM,CAACY,IAAD,CAAN;AACD;AAX0C,OAAtB,CAAvB,CALS,CAmBT;AACA;AACA;AACA;AACA;AACD;;;WAED,iBAAQ;AACN,WAAKC,QAAL,GAAgB,KAAKA,QAAL,CAAcX,IAAd,CAAmB,IAAnB,CAAhB;AACA,WAAKrB,QAAL,CAAcC,KAAd,CAAoBgC,IAApB,CAAyB,UAAzB;AACA,WAAKnC,WAAL,CAAiBoC,KAAjB,CAAuBC,OAAvB,GAAiC,MAAjC;AACD;;;WAED,oBAAW;AACT,WAAKC,OAAL,GAAe,KAAKA,OAAL,CAAaf,IAAb,CAAkB,IAAlB,CAAf;AACA,WAAKrB,QAAL,CAAcC,KAAd,CAAoBgC,IAApB,CAAyB,SAAzB;AACD;;;WAED,sBAAa;AAAA;;AACX,WAAKtC,IAAL,CAAUqB,gBAAV,CAA2B,WAA3B,EAAwC,UAAAH,CAAC,EAAI;AAAA,YACnCC,MADmC,GACVD,CADU,CACnCC,MADmC;AAAA,YAC3BuB,YAD2B,GACVxB,CADU,CAC3BwB,YAD2B;AAE3C,YAAMC,UAAU,GAAGxB,MAAM,CAACyB,OAAP,YAAmBC,0DAAnB,EAAnB;;AACA,YAAIF,UAAJ,EAAgB;AACdD,sBAAY,CAACI,OAAb,CAAqB,YAArB,EAAmCH,UAAU,CAACI,OAAX,CAAmBC,OAAtD;AACD;AACF,OAND;AAQA,WAAKhD,IAAL,CAAUqB,gBAAV,CAA2B,WAA3B,EAAwC,UAAAH,CAAC,EAAI;AAAA,YACnCC,MADmC,GACxBD,CADwB,CACnCC,MADmC;AAE3C,YAAM8B,YAAY,GAAG9B,MAAM,CAACyB,OAAP,YAAmBC,0DAAnB,EAArB;;AACA,YAAI,CAACI,YAAD,IAAiB9B,MAAM,CAACyB,OAAP,YAAmBC,yDAAnB,EAArB,EAA8D;AAC5D3B,WAAC,CAACC,MAAF,CAAS+B,SAAT,CAAmBC,GAAnB,CAAuB,YAAvB;AACD;AACF,OAND;AAQA,WAAKnD,IAAL,CAAUqB,gBAAV,CAA2B,UAA3B,EAAuC,UAAAH,CAAC,EAAI;AAAA,YAClCC,MADkC,GACvBD,CADuB,CAClCC,MADkC;AAE1C,YAAM8B,YAAY,GAAG9B,MAAM,CAACyB,OAAP,YAAmBC,0DAAnB,EAArB;;AACA,YAAI,CAACI,YAAD,IAAiB9B,MAAM,CAACyB,OAAP,YAAmBC,yDAAnB,EAArB,EAA8D;AAC5D3B,WAAC,CAACkC,cAAF;AACD;AACF,OAND;AAQA,WAAKpD,IAAL,CAAUqB,gBAAV,CAA2B,WAA3B,EAAwC,UAAAH,CAAC,EAAI;AAC3CA,SAAC,CAACC,MAAF,CAAS+B,SAAT,CAAmBG,MAAnB,CAA0B,YAA1B;AACD,OAFD;AAIA,WAAKrD,IAAL,CAAUqB,gBAAV,CAA2B,MAA3B,EAAmC,UAAAH,CAAC,EAAI;AAAA,YAC9BC,MAD8B,GACLD,CADK,CAC9BC,MAD8B;AAAA,YACtBuB,YADsB,GACLxB,CADK,CACtBwB,YADsB;AAEtC,YAAMO,YAAY,GAAG9B,MAAM,CAACyB,OAAP,YAAmBC,0DAAnB,EAArB;;AAEA,YAAI,CAACI,YAAD,IAAiB9B,MAAM,CAACyB,OAAP,YAAmBC,yDAAnB,EAArB,EAA8D;AAC5D3B,WAAC,CAACkC,cAAF;AACAjC,gBAAM,CAAC+B,SAAP,CAAiBG,MAAjB,CAAwB,YAAxB;AACA,cAAML,OAAO,GAAGN,YAAY,CAACY,OAAb,CAAqB,YAArB,CAAhB;AACAZ,sBAAY,CAACI,OAAb,CAAqB,YAArB,EAAmC,EAAnC;AACAxB,iBAAO,CAACC,GAAR,CAAY,MAAI,CAACxB,MAAjB;;AACA,cAAMwD,UAAU,GAAG,MAAI,CAACxD,MAAL,CAAYyD,SAAZ,CAAsB,UAAAC,KAAK;AAAA,mBAAIA,KAAK,CAACxB,EAAN,KAAae,OAAjB;AAAA,WAA3B,CAAnB;;AACA,gBAAI,CAACjD,MAAL,CAAYwD,UAAZ,EAAwBG,IAAxB,GAA+BvC,MAAM,CAAC4B,OAAP,CAAeW,IAA9C;AACA,gBAAI,CAAC3D,MAAL,CAAYwD,UAAZ,EAAwBI,GAAxB,GAA8BxC,MAAM,CAAC4B,OAAP,CAAeY,GAA7C;AAEAC,qBAAW,CAAC,MAAI,CAAC7D,MAAN,EAAcwD,UAAd,CAAX;AACD;AACF,OAhBD;AAiBD;;;WAED,sBAAanB,IAAb,EAAmB;AACjB,UAAIA,IAAI,CAACH,EAAL,KAAY,GAAhB,EAAqB;AACnB4B,0DAAS;AACT,aAAK9D,MAAL,CAAYY,OAAZ,CAAoBC,2CAApB;AACA;AACD;;AACD,UAAMR,OAAO,GAAG,KAAKL,MAAL,CAAY+D,MAAZ,CAAmB,UAACC,GAAD,EAAMN,KAAN,EAAgB;AACjDA,aAAK,CAACO,YAAN,CAAmBrD,OAAnB,CAA2B,UAAAsD,MAAM,EAAI;AACnC,cAAIA,MAAM,CAAChC,EAAP,KAAcG,IAAI,CAACH,EAAvB,EAA2B;AACzB8B,eAAG,CAACzB,IAAJ,CAASmB,KAAT;AACD;AACF,SAJD;AAKA,eAAOM,GAAP;AACD,OAPe,EAOb,EAPa,CAAhB;AAQA,WAAK3D,OAAL,GAAeA,OAAf;AACAyD,wDAAS;AACTzD,aAAO,CAACO,OAAR,CAAgBC,2CAAhB;AACD;;;WAED,kBAASsD,IAAT,EAAe;AACb,UAAIA,IAAI,CAACtB,OAAL,YAAiBC,2DAAjB,EAAJ,EAA6C;AAC3C,YAAMsB,UAAU,GAAGD,IAAI,CAACtB,OAAL,YAAiBC,2DAAjB,EAAnB;AACA,YAAMuB,SAAS,GAAGC,qDAAa,CAAC,KAAKrE,IAAN,CAA/B;AACA,YAAM2D,GAAG,GAAGQ,UAAU,CAACpB,OAAX,CAAmBY,GAAnB,GAAyBQ,UAAU,CAACpB,OAAX,CAAmBY,GAA5C,GAAkDS,SAAS,CAACT,GAAxE;AACA,YAAMD,IAAI,GAAGS,UAAU,CAACpB,OAAX,CAAmBW,IAAnB,GAA0BS,UAAU,CAACpB,OAAX,CAAmBW,IAA7C,GAAoDU,SAAS,CAACV,IAA3E;AACA,YAAMY,OAAO,GAAGH,UAAU,CAACpB,OAAX,CAAmBwB,KAAnC;;AACA,YAAID,OAAJ,EAAa;AAAEE,4DAAQ,CAACF,OAAD,EAAU,KAAKvE,MAAf,EAAuB,KAAKD,QAA5B,EAAsC6D,GAAtC,EAA2CD,IAA3C,CAAR;AAA2D;AAC3E;AACF;;;WAED,iBAAQQ,IAAR,EAAc;AACZ,UAAIA,IAAI,CAACtB,OAAL,YAAiBC,2DAAjB,EAAJ,EAA6C;AAC3C,YAAM4B,SAAS,GAAGP,IAAI,CAACtB,OAAL,YAAiBC,0DAAjB,EAAlB;;AACA,YAAI4B,SAAJ,EAAe;AACbC,+DAAW,CAAC,cAAD,EAAiBD,SAAjB,EAA4B,KAAK1E,MAAjC,CAAX;AACD,SAFD,MAEO;AAAEuB,iBAAO,CAACqD,IAAR,CAAa,UAAb;AAA2B;AACrC;AACF;;;;;;;;AAGH,SAAS5D,aAAT,CAAuB6D,SAAvB,EAAkC;AAChC,qBAAYC,kDAAU,CAACD,SAAD,CAAtB;AACD;;SAEchB,W;;;;;yEAAf,iBAA2B7D,MAA3B,EAAmCwD,UAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AACEjC,mBAAO,CAACC,GAAR,CAAY,4BAAZ;AACMuD,qBAFR,GAEoBC,IAAI,CAACC,SAAL,CAAejF,MAAM,CAACwD,UAAD,CAArB,CAFpB;AAAA;AAAA;AAAA,mBAIsB0B,sJAAU,CAAC,QAAD,EAAWlF,MAAM,CAACwD,UAAD,CAAN,CAAmBtB,EAA9B,EAAkC6C,SAAlC,CAJhC;;AAAA;AAIUI,eAJV;AAAA;AAAA,mBAKuBA,GAAG,CAACC,IAAJ,EALvB;;AAAA;AAKUnD,gBALV;AAMIV,mBAAO,CAACC,GAAR,CAAYS,IAAZ;AACAoD,wBAAY,CAACC,UAAb,GAA0BN,IAAI,CAACC,SAAL,CAAejF,MAAf,CAA1B;AACA8D,8DAAS;AACT9D,kBAAM,CAACY,OAAP,CAAeC,2CAAf;AACAU,mBAAO,CAACC,GAAR,CAAY,eAAZ;AAVJ;AAAA;;AAAA;AAAA;AAAA;AAYID,mBAAO,CAACqD,IAAR;;AAZJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9KA;AACA;AAKA;CAGA;;AAEA,+DAAe,UAACW,OAAD,EAAUvF,MAAV,EAAkBD,QAAlB,EAAoD;AAAA,MAAxB6D,GAAwB,uEAAlB,EAAkB;AAAA,MAAdD,IAAc,uEAAP,EAAO;AACjE,MAAM6B,KAAK,GAAGtF,QAAQ,CAACuF,cAAT,CAAwBF,OAAxB,CAAd;AACA,MAAMG,SAAS,GAAGF,KAAK,CAACrF,aAAN,CAAoB,aAApB,CAAlB;AACA,MAAMwF,OAAO,GAAGH,KAAK,CAACrF,aAAN,YAAwB2C,4DAAxB,EAAhB;AACA,MAAM8C,cAAc,GAAG;AACrBlC,SAAK,EAAE;AAAEO,kBAAY,EAAE;AAAhB,KADc;AAErB4B,YAAQ,EAAE;AAFW,GAAvB;AAKA,MAAMC,GAAG,GAAG;AACVC,aAAS,EAAE,4BADD;AAEVC,WAAO,EAAE,iBAFC;AAGVC,YAAQ,EAAE,0BAHA;AAIVC,aAAS,EAAE,oCAJD;AAKVC,WAAO,EAAE,qDALC;AAMVC,qBAAiB,EAAE,YANT;AAOVC,kBAAc,EAAE;AAPN,GAAZ;AASAb,OAAK,CAACrC,SAAN,CAAgBC,GAAhB,CAAoBN,2DAApB;AAEA,MAAMwD,MAAM,GAAG,IAAIzE,sDAAJ,CAAW,eAAX,EAA4B;AACzCG,kBAAc,EAAE,GADyB;AAEzCC,QAAI,GACF;AAAEC,QAAE,EAAE,GAAN;AAAWC,WAAK,EAAE;AAAlB,KADE,4BAECpC,QAFD,EAFqC;AAMzCqC,YANyC,oBAMhCmE,aANgC,EAMjB;AACtB,UAAIC,OAAO,GAAG,EAAd;;AACA,UAAID,aAAa,CAAC5F,MAAd,IAAwB,CAAxB,IAA6B4F,aAAa,CAAC,CAAD,CAAb,KAAqB,KAAKtE,IAAL,CAAU,CAAV,EAAaE,KAAnE,EAA0E;AACxEqE,eAAO,GAAG,KAAKvE,IAAL,CAAU8B,MAAV,CAAiB,UAAC0C,KAAD,EAAQpE,IAAR,EAAiB;AAC1CkE,uBAAa,CAAC3F,OAAd,CAAsB,UAAA8F,UAAU,EAAI;AAClC,gBAAIA,UAAU,KAAKrE,IAAI,CAACF,KAAxB,EAA+B;AAC7BsE,mBAAK,CAAClE,IAAN,CAAWF,IAAX;AACD;AACF,WAJD;AAKA,iBAAOoE,KAAP;AACD,SAPS,EAOP,EAPO,CAAV;AAQD,OATD,MASO;AACLD,eAAO,GAAG,KAAKvE,IAAL,CAAU8B,MAAV,CAAiB,UAAC0C,KAAD,EAAQpE,IAAR,EAAiB;AAC1CkE,uBAAa,CAAC3F,OAAd,CAAsB,UAAA8F,UAAU,EAAI;AAClC,gBAAIA,UAAU,KAAKrE,IAAI,CAACF,KAAxB,EAA+B;AAC7BsE,mBAAK,CAAClE,IAAN,CAAWF,IAAX;AACD;AACF,WAJD;AAKA,iBAAOoE,KAAP;AACD,SAPS,EAOP,EAPO,CAAV;AAQD;;AACDb,oBAAc,CAAClC,KAAf,CAAqBO,YAArB,sBAAwCuC,OAAxC;AACD;AA5BwC,GAA5B,EA6BZ,IA7BY,CAAf;AA+BA,MAAMG,SAAS,GAAG,IAAI9E,sDAAJ,CAAW,MAAX,EAAmB;AACnCE,eAAW,EAAE,eADsB;AAEnCC,kBAAc,EAAE4B,GAFmB;AAGnC3B,QAAI,qBACC2E,gDADD,CAH+B;AAMnCxE,YANmC,oBAM1BmE,aAN0B,EAMX;AACtBZ,aAAO,CAACxC,SAAR,CAAkBG,MAAlB,CAAyB,QAAzB;AACAsC,oBAAc,CAAClC,KAAf,CAAqBE,GAArB,GAA2B2C,aAAa,CAACrE,EAAzC;AACD;AATkC,GAAnB,CAAlB;AAYA,MAAM2E,cAAc,GAAG,EAAvB;;AACA,OAAK,IAAIC,IAAI,GAAG,CAACC,wDAAjB,EAAmCD,IAAI,IAAI,CAACC,sDAA5C,EAA4DD,IAAI,IAAI,CAACC,uDAArE,EAAsF;AACpF,QAAMC,SAAS,GAAG;AAAE9E,QAAE,YAAK4E,IAAL,CAAJ;AAAiB3E,WAAK,YAAK2E,IAAL;AAAtB,KAAlB;AACAD,kBAAc,CAACtE,IAAf,CAAoByE,SAApB;AACD;;AAED,MAAMC,UAAU,GAAG,IAAIpF,sDAAJ,CAAW,OAAX,EAAoB;AACrCE,eAAW,EAAE,gBADwB;AAErCC,kBAAc,EAAE2B,IAFqB;AAGrC1B,QAAI,EAAE4E,cAH+B;AAIrCzE,YAJqC,oBAI5BmE,aAJ4B,EAIb;AACtBZ,aAAO,CAACxC,SAAR,CAAkBG,MAAlB,CAAyB,QAAzB;AACAsC,oBAAc,CAAClC,KAAf,CAAqBC,IAArB,GAA4B4C,aAAa,CAACrE,EAA1C;AACD;AAPoC,GAApB,CAAnB;;AAUA,MAAMgF,YAAY,GAAG,SAAfA,YAAe,CAAA/F,CAAC,EAAI;AAAA,QAChBC,MADgB,GACLD,CADK,CAChBC,MADgB;;AAGxB,QAAIA,MAAM,KAAKsE,SAAS,CAACyB,IAAzB,EAA+B;AAC7B,UAAMC,UAAU,GAAGtB,GAAG,CAACO,cAAJ,CAAmBgB,IAAnB,CAAwBjG,MAAM,CAACe,KAA/B,CAAnB;;AACA,UAAIiF,UAAJ,EAAgB;AACdzB,eAAO,CAACxC,SAAR,CAAkBG,MAAlB,CAAyB,QAAzB;AACD,OAFD,MAEO;AACLqC,eAAO,CAAC2B,QAAR,CAAiB,CAAjB,EAAoBC,WAApB,GAAkCzB,GAAG,CAACI,SAAtC;AACAP,eAAO,CAACxC,SAAR,CAAkBC,GAAlB,CAAsB,QAAtB;AACD;;AACDhC,YAAM,CAACe,KAAP,GAAef,MAAM,CAACe,KAAP,CAAaqF,OAAb,CAAqB1B,GAAG,CAACM,iBAAzB,EAA4C,EAA5C,CAAf;AACD;AACF,GAbD;;AAeA,MAAMqB,aAAa,GAAG,SAAhBA,aAAgB,CAAAtG,CAAC,EAAI;AACzBA,KAAC,CAACkC,cAAF;AACAuC,kBAAc,CAACC,QAAf,GAA0B,KAA1B;;AAEA,QAAIH,SAAS,CAACyB,IAAV,CAAehF,KAAf,CAAqBuF,IAArB,OAAgC,EAApC,EAAwC;AACtC/B,aAAO,CAAC2B,QAAR,CAAiB,CAAjB,EAAoBC,WAApB,GAAkCzB,GAAG,CAACG,QAAtC;AACAN,aAAO,CAACxC,SAAR,CAAkBC,GAAlB,CAAsB,QAAtB;AACA;AACD;;AAEDwC,kBAAc,CAAClC,KAAf,CAAqByD,IAArB,GAA4BzB,SAAS,CAACyB,IAAV,CAAehF,KAA3C;AACAmE,UAAM,CAACqB,eAAP;AACAhB,aAAS,CAACgB,eAAV;AACAV,cAAU,CAACU,eAAX;AAEA3H,UAAM,CAACY,OAAP,CAAe,UAAA8C,KAAK,EAAI;AACtB,UAAIA,KAAK,CAACE,GAAN,KAAcgC,cAAc,CAAClC,KAAf,CAAqBE,GAAnC,IAA0CF,KAAK,CAACC,IAAN,KAAeiC,cAAc,CAAClC,KAAf,CAAqBC,IAAlF,EAAwF;AACtFiC,sBAAc,CAACC,QAAf,GAA0B,IAA1B;AACD;AACF,KAJD;;AAMA,QAAI,CAACD,cAAc,CAACC,QAApB,EAA8B;AAC5B7F,YAAM,CAACuC,IAAP,CAAYqD,cAAc,CAAClC,KAA3B;AACAkE,gBAAU,CAAChC,cAAc,CAAClC,KAAhB,CAAV;AACA2B,kBAAY,CAACC,UAAb,GAA0BN,IAAI,CAACC,SAAL,CAAejF,MAAf,CAA1B;AACA6H,gBAAU;AACX,KALD,MAKO;AACLlC,aAAO,CAAC2B,QAAR,CAAiB,CAAjB,EAAoBC,WAApB,GAAkCzB,GAAG,CAACK,OAAtC;AACAR,aAAO,CAACxC,SAAR,CAAkBC,GAAlB,CAAsB,QAAtB;AACD;AACF,GA9BD;;AAgCA,MAAMlC,YAAY,GAAG,SAAfA,YAAe,CAAAC,CAAC,EAAI;AAAA,QAChBC,MADgB,GACLD,CADK,CAChBC,MADgB;;AAExB,QAAIA,MAAM,CAACyB,OAAP,YAAmBC,4DAAnB,MACI1B,MAAM,CAAC+B,SAAP,CAAiB2E,QAAjB,CAA0BhF,2DAA1B,CADR,EAEE;AACA+E,gBAAU;AACX;;AAED,QAAIzG,MAAM,CAACyB,OAAP,YAAmBC,4DAAnB,EAAJ,EAAgD;AAC9C6C,aAAO,CAACxC,SAAR,CAAkBG,MAAlB,CAAyB,QAAzB;AACD;AACF,GAXD;;AAaA,WAASuE,UAAT,GAAsB;AACpBrC,SAAK,CAACuC,mBAAN,CAA0B,OAA1B,EAAmC7G,YAAnC;AACAwE,aAAS,CAACqC,mBAAV,CAA8B,QAA9B,EAAwCN,aAAxC;AACA/B,aAAS,CAACqC,mBAAV,CAA8B,OAA9B,EAAuCb,YAAvC;AACAZ,UAAM,CAAC0B,OAAP;AACArB,aAAS,CAACqB,OAAV;AACAf,cAAU,CAACe,OAAX;AACAtC,aAAS,CAACuC,KAAV;AACAtC,WAAO,CAACxC,SAAR,CAAkBG,MAAlB,CAAyB,QAAzB;AACAkC,SAAK,CAACrC,SAAN,CAAgBG,MAAhB,CAAuBR,2DAAvB;AACD;;AAED0C,OAAK,CAAClE,gBAAN,CAAuB,OAAvB,EAAgCJ,YAAhC;AACAwE,WAAS,CAACpE,gBAAV,CAA2B,OAA3B,EAAoC4F,YAApC;AACAxB,WAAS,CAACpE,gBAAV,CAA2B,QAA3B,EAAqCmG,aAArC;AACD,CA1JD;;SA4JeG,U;;;;;wEAAf,iBAA0BlE,KAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AACEnC,mBAAO,CAACC,GAAR,CAAY,4BAAZ;AACMuD,qBAFR,GAEoBC,IAAI,CAACC,SAAL,CAAevB,KAAf,CAFpB;AAAA;AAAA;AAAA,mBAIsBwE,qJAAQ,CAAC,QAAD,EAAWnD,SAAX,CAJ9B;;AAAA;AAIUI,eAJV;AAAA;AAAA,mBAKuBA,GAAG,CAACgD,IAAJ,EALvB;;AAAA;AAKUlG,gBALV;AAMIV,mBAAO,CAACC,GAAR,CAAYS,IAAI,CAACC,EAAjB,EANJ,CAOI;;AACAwB,iBAAK,CAACxB,EAAN,GAAWD,IAAI,CAACC,EAAhB;AACArB,2DAAM,CAAC6C,KAAD,CAAN;AACAnC,mBAAO,CAACC,GAAR,CAAY,kBAAZ;AAVJ;AAAA;;AAAA;AAAA;AAAA;AAYID,mBAAO,CAACqD,IAAR;;AAZJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvKA;AACA;AACA;AACA;AACA;AACA;AAEe,SAASwD,WAAT,CAAqBvI,QAArB,EAA+B;AAC5C,MAAMwI,GAAG,GAAGnI,QAAQ,CAACC,aAAT,CAAuBN,QAAvB,CAAZ;AACA,MAAMyI,QAAQ,2uBAAd;AAeA,MAAMC,MAAM,GAAGC,gDAAG,EAAlB;AACAtI,UAAQ,CAACuI,IAAT,CAAcC,MAAd,CAAqBH,MAArB;AACAF,KAAG,CAACM,kBAAJ,CAAuB,WAAvB,EAAoCL,QAApC;AACAM,0DAAc;AACdC,SAAO,CAACN,MAAD,EAASF,GAAT,CAAP;AACD;;SAEcQ,O;;;;;qEAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAuBN,kBAAvB,2DAAgC,IAAhC;AAAsCF,eAAtC;;AACE,gBAAIE,MAAJ,EAAY;AAAEA,oBAAM,CAACpF,SAAP,CAAiBC,GAAjB,CAAqB,QAArB;AAAiC;;AACzCrD,oBAFR,GAEmB,EAFnB;AAGQC,kBAHR,GAGiB,EAHjB;AAAA;AAAA;AAAA,mBAKsBuD,sJAAO,CAAC,OAAD,CAL7B;;AAAA;AAKU4B,eALV;AAAA;AAAA,mBAM4B5B,sJAAO,CAAC,QAAD,CANnC;;AAAA;AAMUuF,qBANV;;AAAA,kBAOQ3D,GAAG,CAAC4D,MAAJ,KAAe,GAPvB;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAQyB5D,GAAG,CAACgD,IAAJ,EARzB;;AAAA;AAQYlG,gBARZ;AASMV,mBAAO,CAACC,GAAR,CAAYS,IAAZ;AACAA,gBAAI,CAACrB,OAAL,CAAa,UAAAoI,GAAG,EAAI;AAClB,kBAAMC,UAAU,GAAGjE,IAAI,CAACkE,KAAL,CAAWF,GAAG,CAAC/G,IAAf,CAAnB;;AACA,kBAAMI,IAAI;AAAKH,kBAAE,EAAE8G,GAAG,CAAC9G;AAAb,iBAAoB+G,UAApB,CAAV;;AACAlJ,sBAAQ,CAACwC,IAAT,CAAcF,IAAd;AACD,aAJD;AAVN;AAAA;;AAAA;AAAA,kBAemB,IAAI8G,KAAJ,CAAU,wBAAV,CAfnB;;AAAA;AAAA,kBAgBQL,SAAS,CAACC,MAAV,KAAqB,GAhB7B;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAiByBD,SAAS,CAACX,IAAV,EAjBzB;;AAAA;AAiBYlG,iBAjBZ;;AAkBM,gBAAIA,KAAJ,EAAU;AACRA,mBAAI,CAACrB,OAAL,CAAa,UAAAoI,GAAG,EAAI;AAClB,oBAAMC,UAAU,GAAGjE,IAAI,CAACkE,KAAL,CAAWF,GAAG,CAAC/G,IAAf,CAAnB;;AACA,oBAAMI,IAAI;AAAKH,oBAAE,EAAE8G,GAAG,CAAC9G;AAAb,mBAAoB+G,UAApB,CAAV;;AACAjJ,sBAAM,CAACuC,IAAP,CAAYF,IAAZ;AACD,eAJD;AAKD;;AAxBP;AAAA;;AAAA;AAAA,kBAyBmB,IAAI8G,KAAJ,CAAU,wBAAV,CAzBnB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AA2BI5H,mBAAO,CAACqD,IAAR;;AA3BJ;AAAA;;AA6BI,gBAAI2D,MAAJ,EAAY;AAAEA,oBAAM,CAACpF,SAAP,CAAiBG,MAAjB,CAAwB,QAAxB;AAAoC;;AAClD+E,eAAG,CAAClF,SAAJ,CAAcC,GAAd,CAAkB,QAAlB;AACAgG,8DAAQ;AACRC,2DAAQ,CAAC,OAAD,EAAUtJ,QAAV,EAAoBC,MAApB,CAAR;AAhCJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;;;;;;;;;;;;;;;;;AC/BA;AACA;;AAEA,IAAM2E,WAAW,GAAG,SAAdA,WAAc,CAAC3E,MAAD,EAAS0E,SAAT,EAAuB;AACzC,MAAM4E,iBAAiB,GAAG5E,SAAS,CAAC4C,QAApC;AACA,MAAM9D,UAAU,GAAGxD,MAAM,CAACyD,SAAP,CAAiB,UAAAC,KAAK;AAAA,WAAIA,KAAK,CAACxB,EAAN,KAAawC,SAAS,CAAC1B,OAAV,CAAkBC,OAAnC;AAAA,GAAtB,CAAnB;AACAjD,QAAM,CAACuJ,MAAP,CAAc/F,UAAd,EAA0B,CAA1B;AACAkB,WAAS,CAAC8E,eAAV,CAA0B,eAA1B;AACA9E,WAAS,CAACvB,SAAV,CAAoBG,MAApB,CAA2BR,0DAA3B;AACAwG,mBAAiB,CAAC,CAAD,CAAjB,CAAqB/B,WAArB,GAAmC,EAAnC;AACA+B,mBAAiB,CAAC,CAAD,CAAjB,CAAqB9G,KAArB,CAA2BC,OAA3B,GAAqC,MAArC;AACA4C,cAAY,CAACC,UAAb,GAA0BN,IAAI,CAACC,SAAL,CAAejF,MAAf,CAA1B;AACD,CATD,C,CASG;;;AAEH,+DAAe,UAACuE,OAAD,EAAUJ,IAAV,EAAgBnE,MAAhB,EAA2B;AACxC,MAAMwF,KAAK,GAAGtF,QAAQ,CAACuF,cAAT,CAAwBlB,OAAxB,CAAd;AAEAiB,OAAK,CAACrC,SAAN,CAAgBC,GAAhB,CAAoBN,2DAApB;;AAEA,MAAM+E,UAAU,GAAG,SAAbA,UAAa,GAAa;AAAA,sCAAT4B,IAAS;AAATA,UAAS;AAAA;;AAC9BjE,SAAK,CAACuC,mBAAN,CAA0B,OAA1B,EAAmC0B,IAAI,CAACvI,YAAxC;AACAsE,SAAK,CAACrC,SAAN,CAAgBG,MAAhB,CAAuBR,2DAAvB;AACD,GAHD;;AAKA,MAAM5B,YAAY,GAAG,SAAfA,YAAe,CAAAC,CAAC,EAAI;AAAA,QAChBC,MADgB,GACLD,CADK,CAChBC,MADgB;;AAGxB,QAAIA,MAAM,CAAC+F,IAAP,KAAgB,KAApB,EAA2B;AACzBuC,oBAAc,CAAC,QAAD,EAAW1J,MAAX,EAAmBmE,IAAnB,CAAd;AACA0D,gBAAU,CAAC3G,YAAD,CAAV;AACD;;AAED,QAAIE,MAAM,CAACyB,OAAP,YAAmBC,4DAAnB,MACI1B,MAAM,CAAC+B,SAAP,CAAiB2E,QAAjB,CAA0BhF,2DAA1B,CADR,EAEE;AACA+E,gBAAU,CAAC3G,YAAD,CAAV;AACD;AACF,GAbD;;AAeAsE,OAAK,CAAClE,gBAAN,CAAuB,OAAvB,EAAgCJ,YAAhC;AACD,CA1BD;;SA4BewI,c;;;;;4EAAf,iBAA8BC,UAA9B,EAA0C3J,MAA1C,EAAkDmE,IAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEsByF,qJAAU,CAACD,UAAD,EAAaxF,IAAI,CAACnB,OAAL,CAAaC,OAA1B,CAFhC;;AAAA;AAEUkC,eAFV;AAGI5D,mBAAO,CAACC,GAAR,CAAY2D,GAAZ;;AACA,gBAAIA,GAAG,CAAC4D,MAAJ,KAAe,GAAnB,EAAwB;AACtBpE,yBAAW,CAAC3E,MAAD,EAASmE,IAAT,CAAX;AACD;;AANL;AAAA;;AAAA;AAAA;AAAA;AAQI5C,mBAAO,CAACqD,IAAR;;AARJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1CA;AACA;AAEO,IAAM/D,MAAM,GAAG,SAATA,MAAS,CAAA6C,KAAK,EAAI;AAC7BxD,UAAQ,CAAC2J,gBAAT,CAA0B,cAA1B,EAA0CjJ,OAA1C,CAAkD,UAAAkJ,GAAG,EAAI;AACvD,QAAIpG,KAAK,CAACC,IAAN,KAAemG,GAAG,CAAC9G,OAAJ,CAAYW,IAA/B,EAAqC;AACnCmG,SAAG,CAACD,gBAAJ,CAAqB,eAArB,EAAsCjJ,OAAtC,CAA8C,UAAA8D,SAAS,EAAI;AACzD,YAAIA,SAAS,CAAC1B,OAAV,CAAkBY,GAAlB,KAA0BF,KAAK,CAACE,GAApC,EAAyC;AACvC,cAAM0F,iBAAiB,GAAG5E,SAAS,CAAC4C,QAApC;AACA5C,mBAAS,CAACvB,SAAV,CAAoBC,GAApB,CAAwBN,0DAAxB;AACA4B,mBAAS,CAACvB,SAAV,CAAoBG,MAApB,CAA2BR,2DAA3B;AACA4B,mBAAS,CAACqF,YAAV,CAAuB,eAAvB,EAAwCrG,KAAK,CAACxB,EAA9C;AACAwC,mBAAS,CAACqF,YAAV,CAAuB,WAAvB,EAAoC,IAApC;AACAT,2BAAiB,CAAC,CAAD,CAAjB,CAAqB/B,WAArB,GAAmC7D,KAAK,CAACyD,IAAzC;AACAmC,2BAAiB,CAAC,CAAD,CAAjB,CAAqB9G,KAArB,CAA2BC,OAA3B,GAAqC,QAArC;AACD;AACF,OAVD;AAWD;AACF,GAdD;AAeD,CAhBM;AAkBA,IAAMqB,SAAS,GAAG,SAAZA,SAAY,GAAM;AAC7B5D,UAAQ,CAAC2J,gBAAT,CAA0B,cAA1B,EAA0CjJ,OAA1C,CAAkD,UAAAkJ,GAAG,EAAI;AACvDA,OAAG,CAACD,gBAAJ,CAAqB,eAArB,EAAsCjJ,OAAtC,CAA8C,UAAA8D,SAAS,EAAI;AACzD,UAAM4E,iBAAiB,GAAG5E,SAAS,CAAC4C,QAApC;AACA5C,eAAS,CAACvB,SAAV,CAAoBG,MAApB,CAA2BR,0DAA3B;AACA4B,eAAS,CAACvB,SAAV,CAAoBC,GAApB,CAAwBN,2DAAxB;AACA4B,eAAS,CAAC8E,eAAV,CAA0B,eAA1B;AACA9E,eAAS,CAAC8E,eAAV,CAA0B,WAA1B,EAAuC,IAAvC;AACAF,uBAAiB,CAAC,CAAD,CAAjB,CAAqB/B,WAArB,GAAmC,EAAnC;AACA+B,uBAAiB,CAAC,CAAD,CAAjB,CAAqB9G,KAArB,CAA2BC,OAA3B,GAAqC,MAArC;AACD,KARD;AASD,GAVD;AAWD,CAZM;AAcA,IAAMuH,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AACjC,MAAI1E,UAAU,GAAG,EAAjB;;AACA,MAAID,YAAY,CAAC4E,OAAb,CAAqB,YAArB,CAAJ,EAAwC;AACtC3E,cAAU,GAAGN,IAAI,CAACkE,KAAL,CAAW7D,YAAY,CAAC4E,OAAb,CAAqB,YAArB,CAAX,CAAb;AACD;;AACD,SAAO3E,UAAP;AACD,CANM;AAQA,SAAe4E,gBAAtB;AAAA;AAAA;;;8EAAO,iBAAgClK,MAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwC2J,sBAAxC,2DAAqD,QAArD;AACCQ,qBADD,GACa,EADb;AAEL5I,mBAAO,CAACC,GAAR,CAAY,SAAZ;AAFK;AAAA;AAAA,mBAIe+B,qJAAO,CAACoG,UAAD,CAJtB;;AAAA;AAIGxE,eAJH;AAKH5D,mBAAO,CAACC,GAAR,CAAY2D,GAAZ;AALG;AAAA,mBAMgBA,GAAG,CAACgD,IAAJ,EANhB;;AAAA;AAMGlG,gBANH;AAOHV,mBAAO,CAACC,GAAR,CAAYS,IAAZ;AACAA,gBAAI,CAACrB,OAAL,CAAa,UAAAoI,GAAG,EAAI;AAClB,kBAAMC,UAAU,GAAGjE,IAAI,CAACkE,KAAL,CAAWF,GAAG,CAAC/G,IAAf,CAAnB;;AACA,kBAAMI,IAAI;AAAKH,kBAAE,EAAE8G,GAAG,CAAC9G;AAAb,iBAAoB+G,UAApB,CAAV;;AACAkB,uBAAS,CAAC5H,IAAV,CAAeF,IAAf;AACD,aAJD;AAKAd,mBAAO,CAACC,GAAR,CAAY2I,SAAZ;AAbG;AAAA;;AAAA;AAAA;AAAA;AAeH5I,mBAAO,CAACqD,IAAR;;AAfG;AAAA;AAiBH;AACA5E,kBAAM,GAAGmK,SAAT;AACA5I,mBAAO,CAACC,GAAR,CAAYxB,MAAZ;;AACA,gBAAIA,MAAM,CAACW,MAAP,GAAgB,CAApB,EAAuB;AACrBwJ,uBAAS,CAACvJ,OAAV,CAAkBC,MAAlB;AACD;;AAtBE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;;;;;;;;;WC3CP,oCAAoC,+BAA+B,E","file":"main.a6a8c235d4accca6c1f1.hot-update.js","sourcesContent":["import addEvent from '../addEvent';\r\nimport { updateData } from '../apiUtils.js/apiUtils';\r\nimport { classes } from '../auxiliary';\r\nimport removeEvent from '../removeEvent';\r\nimport { render, resetGrid } from '../render';\r\nimport Select from '../UI/select/select';\r\nimport { capitalize, firstFreeSlot } from '../utils';\r\n\r\nexport default class Calendar {\r\n  constructor(selector, user, userList, events) {\r\n    this.root = document.querySelector(selector);\r\n    this.user = user;\r\n    this.userList = userList;\r\n    this.addEventBtn = this.root.querySelector('[data-type=\"add-event\"]');\r\n\r\n    this.events = events || [];\r\n    this.filtred = [];\r\n\r\n    this.handlers = {\r\n      click: [],\r\n      dragNdrop: [],\r\n    };\r\n\r\n    this.activeEvents = {};\r\n\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    if (this.events.length > 0) {\r\n      this.events.forEach(render);\r\n    }\r\n    this.user.rights.forEach(right => this[getMethodName(right)]());\r\n    this.clickListener();\r\n  }\r\n\r\n  clickListener() {\r\n    const clickHandler = e => {\r\n      const { target } = e;\r\n      this.handlers.click.forEach(handler => this[handler](target));\r\n    };\r\n\r\n    this.root.addEventListener('click', clickHandler);\r\n  }\r\n\r\n  onFilter() {\r\n    const { userList } = this;\r\n    console.log('userList:', userList);\r\n    const filter = this.filterByUser.bind(this);\r\n    // eslint-disable-next-line no-unused-vars\r\n    const filterByMember = new Select('#filter', {\r\n      label: 'Filter',\r\n      placeholder: 'Choose member...',\r\n      defaultSeleted: '0',\r\n      data: [\r\n        { id: '0', value: 'All members' },\r\n        ...userList,\r\n      ],\r\n      onSelect(item) {\r\n        console.log(item);\r\n        filter(item);\r\n      },\r\n    });\r\n\r\n    // this.events = getEventStore();\r\n    // console.log(this.events);\r\n    // if (this.events.length > 0) {\r\n    //   this.events.forEach(render);\r\n    // }\r\n  }\r\n\r\n  onAdd() {\r\n    this.newEvent = this.newEvent.bind(this);\r\n    this.handlers.click.push('newEvent');\r\n    this.addEventBtn.style.display = 'flex';\r\n  }\r\n\r\n  onRemove() {\r\n    this.rmEvent = this.rmEvent.bind(this);\r\n    this.handlers.click.push('rmEvent');\r\n  }\r\n\r\n  onUpdatedd() {\r\n    this.root.addEventListener('dragstart', e => {\r\n      const { target, dataTransfer } = e;\r\n      const dragTarget = target.closest(`.${classes.slotBooked}`);\r\n      if (dragTarget) {\r\n        dataTransfer.setData('text/plain', dragTarget.dataset.eventId);\r\n      }\r\n    });\r\n\r\n    this.root.addEventListener('dragenter', e => {\r\n      const { target } = e;\r\n      const targetBooked = target.closest(`.${classes.slotBooked}`);\r\n      if (!targetBooked && target.closest(`.${classes.eventSlot}`)) {\r\n        e.target.classList.add('drag-hover');\r\n      }\r\n    });\r\n\r\n    this.root.addEventListener('dragover', e => {\r\n      const { target } = e;\r\n      const targetBooked = target.closest(`.${classes.slotBooked}`);\r\n      if (!targetBooked && target.closest(`.${classes.eventSlot}`)) {\r\n        e.preventDefault();\r\n      }\r\n    });\r\n\r\n    this.root.addEventListener('dragleave', e => {\r\n      e.target.classList.remove('drag-hover');\r\n    });\r\n\r\n    this.root.addEventListener('drop', e => {\r\n      const { target, dataTransfer } = e;\r\n      const targetBooked = target.closest(`.${classes.slotBooked}`);\r\n\r\n      if (!targetBooked && target.closest(`.${classes.eventSlot}`)) {\r\n        e.preventDefault();\r\n        target.classList.remove('drag-hover');\r\n        const eventId = dataTransfer.getData('text/plain');\r\n        dataTransfer.setData('text/plain', '');\r\n        console.log(this.events);\r\n        const eventIndex = this.events.findIndex(event => event.id === eventId);\r\n        this.events[eventIndex].time = target.dataset.time;\r\n        this.events[eventIndex].day = target.dataset.day;\r\n\r\n        updateEvent(this.events, eventIndex);\r\n      }\r\n    });\r\n  }\r\n\r\n  filterByUser(item) {\r\n    if (item.id === '0') {\r\n      resetGrid();\r\n      this.events.forEach(render);\r\n      return;\r\n    }\r\n    const filtred = this.events.reduce((arr, event) => {\r\n      event.partisipants.forEach(member => {\r\n        if (member.id === item.id) {\r\n          arr.push(event);\r\n        }\r\n      });\r\n      return arr;\r\n    }, []);\r\n    this.filtred = filtred;\r\n    resetGrid();\r\n    filtred.forEach(render);\r\n  }\r\n\r\n  newEvent(elem) {\r\n    if (elem.closest(`.${classes.triggerOpen}`)) {\r\n      const targetElem = elem.closest(`.${classes.triggerOpen}`);\r\n      const firstFree = firstFreeSlot(this.root);\r\n      const day = targetElem.dataset.day ? targetElem.dataset.day : firstFree.day;\r\n      const time = targetElem.dataset.time ? targetElem.dataset.time : firstFree.time;\r\n      const modalId = targetElem.dataset.modal;\r\n      if (modalId) { addEvent(modalId, this.events, this.userList, day, time); }\r\n    }\r\n  }\r\n\r\n  rmEvent(elem) {\r\n    if (elem.closest(`.${classes.removeEvent}`)) {\r\n      const eventSlot = elem.closest(`.${classes.slotBooked}`);\r\n      if (eventSlot) {\r\n        removeEvent('event-remove', eventSlot, this.events);\r\n      } else { console.warn('No event'); }\r\n    }\r\n  }\r\n}\r\n\r\nfunction getMethodName(eventName) {\r\n  return `on${capitalize(eventName)}`;\r\n}\r\n\r\nasync function updateEvent(events, eventIndex) {\r\n  console.log('Event store in progress...');\r\n  const eventJson = JSON.stringify(events[eventIndex]);\r\n  try {\r\n    const res = await updateData('events', events[eventIndex].id, eventJson);\r\n    const data = await res.text();\r\n    console.log(data);\r\n    localStorage.eventStore = JSON.stringify(events);\r\n    resetGrid();\r\n    events.forEach(render);\r\n    console.log('Event updated');\r\n  } catch (err) {\r\n    console.warn(err);\r\n  }\r\n}\r\n","import { postData } from './apiUtils.js/apiUtils';\r\nimport {\r\n  classes,\r\n  eventHours,\r\n  workWeek,\r\n} from './auxiliary';\r\nimport { render } from './render';\r\nimport Select from './UI/select/select';\r\n\r\n// const generateId = () => `e${(Math.trunc(Math.random() * 1e8)).toString(16)}`;\r\n\r\nexport default (popupId, events, userList, day = '', time = '') => {\r\n  const popup = document.getElementById(popupId);\r\n  const eventForm = popup.querySelector('#event-form');\r\n  const warnMsg = popup.querySelector(`.${classes.modalWarning}`);\r\n  const stateEventSlot = {\r\n    event: { partisipants: [] },\r\n    isBooked: false,\r\n  };\r\n\r\n  const msg = {\r\n    processed: 'Event store in progress...',\r\n    success: 'Event is stored',\r\n    nameWarn: 'Enter event name, please',\r\n    inputWarn: 'Only letters a-z and space, please',\r\n    timeErr: 'Failed to create event. This time is already booked',\r\n    regExpNameReplace: /[^a-z\\s]/gi,\r\n    regExpNameTest: /[a-z\\s]/gi,\r\n  };\r\n  popup.classList.add(classes.modalActive);\r\n\r\n  const select = new Select('#participants', {\r\n    defaultSeleted: '0',\r\n    data: [\r\n      { id: '0', value: 'All members' },\r\n      ...userList,\r\n    ],\r\n    onSelect(selectedItems) {\r\n      let members = [];\r\n      if (selectedItems.length <= 1 && selectedItems[0] === this.data[0].value) {\r\n        members = this.data.reduce((total, item) => {\r\n          selectedItems.forEach(selectItem => {\r\n            if (selectItem !== item.value) {\r\n              total.push(item);\r\n            }\r\n          });\r\n          return total;\r\n        }, []);\r\n      } else {\r\n        members = this.data.reduce((total, item) => {\r\n          selectedItems.forEach(selectItem => {\r\n            if (selectItem === item.value) {\r\n              total.push(item);\r\n            }\r\n          });\r\n          return total;\r\n        }, []);\r\n      }\r\n      stateEventSlot.event.partisipants = [...members];\r\n    },\r\n  }, true);\r\n\r\n  const selectDay = new Select('#day', {\r\n    placeholder: 'Choose day...',\r\n    defaultSeleted: day,\r\n    data: [\r\n      ...workWeek,\r\n    ],\r\n    onSelect(selectedItems) {\r\n      warnMsg.classList.remove('active');\r\n      stateEventSlot.event.day = selectedItems.id;\r\n    },\r\n  });\r\n\r\n  const eventTimeTable = [];\r\n  for (let hour = +eventHours.start; hour <= +eventHours.end; hour += +eventHours.step) {\r\n    const eventTime = { id: `${hour}`, value: `${hour}:00` };\r\n    eventTimeTable.push(eventTime);\r\n  }\r\n\r\n  const selectTime = new Select('#time', {\r\n    placeholder: 'Choose time...',\r\n    defaultSeleted: time,\r\n    data: eventTimeTable,\r\n    onSelect(selectedItems) {\r\n      warnMsg.classList.remove('active');\r\n      stateEventSlot.event.time = selectedItems.id;\r\n    },\r\n  });\r\n\r\n  const inputHandler = e => {\r\n    const { target } = e;\r\n\r\n    if (target === eventForm.name) {\r\n      const checkValue = msg.regExpNameTest.test(target.value);\r\n      if (checkValue) {\r\n        warnMsg.classList.remove('active');\r\n      } else {\r\n        warnMsg.children[1].textContent = msg.inputWarn;\r\n        warnMsg.classList.add('active');\r\n      }\r\n      target.value = target.value.replace(msg.regExpNameReplace, '');\r\n    }\r\n  };\r\n\r\n  const submitHandler = e => {\r\n    e.preventDefault();\r\n    stateEventSlot.isBooked = false;\r\n\r\n    if (eventForm.name.value.trim() === '') {\r\n      warnMsg.children[1].textContent = msg.nameWarn;\r\n      warnMsg.classList.add('active');\r\n      return;\r\n    }\r\n\r\n    stateEventSlot.event.name = eventForm.name.value;\r\n    select.selectionResult();\r\n    selectDay.selectionResult();\r\n    selectTime.selectionResult();\r\n\r\n    events.forEach(event => {\r\n      if (event.day === stateEventSlot.event.day && event.time === stateEventSlot.event.time) {\r\n        stateEventSlot.isBooked = true;\r\n      }\r\n    });\r\n\r\n    if (!stateEventSlot.isBooked) {\r\n      events.push(stateEventSlot.event);\r\n      storeEvent(stateEventSlot.event);\r\n      localStorage.eventStore = JSON.stringify(events);\r\n      closePopup();\r\n    } else {\r\n      warnMsg.children[1].textContent = msg.timeErr;\r\n      warnMsg.classList.add('active');\r\n    }\r\n  };\r\n\r\n  const clickHandler = e => {\r\n    const { target } = e;\r\n    if (target.closest(`.${classes.triggerClose}`) ||\r\n            target.classList.contains(classes.modalActive)\r\n    ) {\r\n      closePopup();\r\n    }\r\n\r\n    if (target.closest(`.${classes.modalWarning}`)) {\r\n      warnMsg.classList.remove('active');\r\n    }\r\n  };\r\n\r\n  function closePopup() {\r\n    popup.removeEventListener('click', clickHandler);\r\n    eventForm.removeEventListener('submit', submitHandler);\r\n    eventForm.removeEventListener('input', inputHandler);\r\n    select.destroy();\r\n    selectDay.destroy();\r\n    selectTime.destroy();\r\n    eventForm.reset();\r\n    warnMsg.classList.remove('active');\r\n    popup.classList.remove(classes.modalActive);\r\n  }\r\n\r\n  popup.addEventListener('click', clickHandler);\r\n  eventForm.addEventListener('input', inputHandler);\r\n  eventForm.addEventListener('submit', submitHandler);\r\n};\r\n\r\nasync function storeEvent(event) {\r\n  console.log('Event store in progress...');\r\n  const eventJson = JSON.stringify(event);\r\n  try {\r\n    const res = await postData('events', eventJson);\r\n    const data = await res.json();\r\n    console.log(data.id);\r\n    // eslint-disable-next-line no-param-reassign\r\n    event.id = data.id;\r\n    render(event);\r\n    console.log('New event stored');\r\n  } catch (err) {\r\n    console.warn(err);\r\n  }\r\n}\r\n","/* eslint-disable no-unused-vars */\r\nimport showGrid from '../showGrid';\r\nimport modalTemplates from './modalTemplates';\r\nimport userAuth from '../login';\r\nimport lds from './loader';\r\nimport { getData } from '../apiUtils.js/apiUtils';\r\n\r\nexport default function appTemplate(selector) {\r\n  const app = document.querySelector(selector);\r\n  const template = ` <div class=\"controls\">\r\n            <h2 class=\"title\">Calendar</h2>\r\n            <div class=\"modal__dialog-header-warning\" id=\"modal-warning\">\r\n              <span class=\"fas fa-exclamation-circle\"></span>\r\n              <span class=\"modal__dialog-header-warning-text\"></span>\r\n              <span class=\"modal__dialog-header-warning-close fas fa-times-circle\"></span>\r\n            </div>\r\n            <div id=\"filter\"></div>\r\n            <button class=\"btn js-modal-open\" data-type=\"add-event\" data-modal=\"modal-event\">\r\n                <span>New event</span>\r\n                <span class=\"fas fa-plus\"></span>\r\n            </button>            \r\n        </div>\r\n        <div class=\"calendar-grid\">\r\n        </div>`;\r\n  const loader = lds();\r\n  document.body.append(loader);\r\n  app.insertAdjacentHTML('beforeend', template);\r\n  modalTemplates();\r\n  getList(loader, app);\r\n}\r\n\r\nasync function getList(loader = null, app) {\r\n  if (loader) { loader.classList.add('active'); }\r\n  const userList = [];\r\n  const events = [];\r\n  try {\r\n    const res = await getData('users');\r\n    const resEvents = await getData('events');\r\n    if (res.status === 200) {\r\n      const data = await res.json();\r\n      console.log(data);\r\n      data.forEach(obj => {\r\n        const parsedData = JSON.parse(obj.data);\r\n        const item = { id: obj.id, ...parsedData };\r\n        userList.push(item);\r\n      });\r\n    } else { throw new Error('Network status not 200'); }\r\n    if (resEvents.status === 200) {\r\n      const data = await resEvents.json();\r\n      if (data) {\r\n        data.forEach(obj => {\r\n          const parsedData = JSON.parse(obj.data);\r\n          const item = { id: obj.id, ...parsedData };\r\n          events.push(item);\r\n        });\r\n      }\r\n    } else { throw new Error('Network status not 200'); }\r\n  } catch (err) {\r\n    console.warn(err);\r\n  } finally {\r\n    if (loader) { loader.classList.remove('active'); }\r\n    app.classList.add('active');\r\n    showGrid();\r\n    userAuth('login', userList, events);\r\n  }\r\n}\r\n","import { deleteData } from './apiUtils.js/apiUtils';\r\nimport { classes } from './auxiliary';\r\n\r\nconst removeEvent = (events, eventSlot) => {\r\n  const eventSlotChildren = eventSlot.children;\r\n  const eventIndex = events.findIndex(event => event.id === eventSlot.dataset.eventId);\r\n  events.splice(eventIndex, 1);\r\n  eventSlot.removeAttribute('data-event-id');\r\n  eventSlot.classList.remove(classes.slotBooked);\r\n  eventSlotChildren[0].textContent = '';\r\n  eventSlotChildren[1].style.display = 'none';\r\n  localStorage.eventStore = JSON.stringify(events);\r\n}; // end removeEvent\r\n\r\nexport default (modalId, elem, events) => {\r\n  const popup = document.getElementById(modalId);\r\n\r\n  popup.classList.add(classes.modalActive);\r\n\r\n  const closePopup = (...args) => {\r\n    popup.removeEventListener('click', args.clickHandler);\r\n    popup.classList.remove(classes.modalActive);\r\n  };\r\n\r\n  const clickHandler = e => {\r\n    const { target } = e;\r\n\r\n    if (target.name === 'yes') {\r\n      removeEventApi('events', events, elem);\r\n      closePopup(clickHandler);\r\n    }\r\n\r\n    if (target.closest(`.${classes.triggerClose}`) ||\r\n            target.classList.contains(classes.modalActive)\r\n    ) {\r\n      closePopup(clickHandler);\r\n    }\r\n  };\r\n\r\n  popup.addEventListener('click', clickHandler);\r\n};\r\n\r\nasync function removeEventApi(entityName, events, elem) {\r\n  try {\r\n    const res = await deleteData(entityName, elem.dataset.eventId);\r\n    console.log(res);\r\n    if (res.status === 204) {\r\n      removeEvent(events, elem);\r\n    }\r\n  } catch (err) {\r\n    console.warn(err);\r\n  }\r\n}\r\n","import { getData } from './apiUtils.js/apiUtils';\r\nimport { classes } from './auxiliary';\r\n\r\nexport const render = event => {\r\n  document.querySelectorAll('.row-meeting').forEach(row => {\r\n    if (event.time === row.dataset.time) {\r\n      row.querySelectorAll('.meeting-cell').forEach(eventSlot => {\r\n        if (eventSlot.dataset.day === event.day) {\r\n          const eventSlotChildren = eventSlot.children;\r\n          eventSlot.classList.add(classes.slotBooked);\r\n          eventSlot.classList.remove(classes.triggerOpen);\r\n          eventSlot.setAttribute('data-event-id', event.id);\r\n          eventSlot.setAttribute('draggable', true);\r\n          eventSlotChildren[0].textContent = event.name;\r\n          eventSlotChildren[1].style.display = 'inline';\r\n        }\r\n      });\r\n    }\r\n  });\r\n};\r\n\r\nexport const resetGrid = () => {\r\n  document.querySelectorAll('.row-meeting').forEach(row => {\r\n    row.querySelectorAll('.meeting-cell').forEach(eventSlot => {\r\n      const eventSlotChildren = eventSlot.children;\r\n      eventSlot.classList.remove(classes.slotBooked);\r\n      eventSlot.classList.add(classes.triggerOpen);\r\n      eventSlot.removeAttribute('data-event-id');\r\n      eventSlot.removeAttribute('draggable', true);\r\n      eventSlotChildren[0].textContent = '';\r\n      eventSlotChildren[1].style.display = 'none';\r\n    });\r\n  });\r\n};\r\n\r\nexport const getEventStore = () => {\r\n  let eventStore = [];\r\n  if (localStorage.getItem('eventStore')) {\r\n    eventStore = JSON.parse(localStorage.getItem('eventStore'));\r\n  }\r\n  return eventStore;\r\n};\r\n\r\nexport async function getEventsFromApi(events, entityName = 'events') {\r\n  const eventList = [];\r\n  console.log('Loading');\r\n  try {\r\n    const res = await getData(entityName);\r\n    console.log(res);\r\n    const data = await res.json();\r\n    console.log(data);\r\n    data.forEach(obj => {\r\n      const parsedData = JSON.parse(obj.data);\r\n      const item = { id: obj.id, ...parsedData };\r\n      eventList.push(item);\r\n    });\r\n    console.log(eventList);\r\n  } catch (err) {\r\n    console.warn(err);\r\n  } finally {\r\n    // eslint-disable-next-line no-param-reassign\r\n    events = eventList;\r\n    console.log(events);\r\n    if (events.length > 0) {\r\n      eventList.forEach(render);\r\n    }\r\n  }\r\n}\r\n","__webpack_require__.h = function() { return \"96498b1dc7e5c323915f\"; }"],"sourceRoot":""}