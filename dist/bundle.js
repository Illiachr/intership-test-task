(()=>{"use strict";var e="modal__dialog-header-content",t="modal--active",n="js-modal-close",a="js-modal-open",i="meeting-cell",r="meeting-cell--bisy",c=[{id:"1",value:"Maria"},{id:"2",value:"Max"},{id:"3",value:"John"},{id:"4",value:"Nick"},{id:"5",value:"Natali"}],o=[{id:"1",value:"Mon"},{id:"2",value:"Tue"},{id:"3",value:"Wed"},{id:"4",value:"Thu"},{id:"5",value:"Fri"}],s=function(){var e=o.map((function(e){return'\n        <div class="grid-header">'.concat(e.value,"</div>\n    ")}));return'\n    <div class="row-header">\n        <div class="grid-header">Time</div>\n        '.concat(e.join(""),"\n    </div>     \n    ")},l=function(e){var t=["cell","meeting-cell","js-modal-open"],n=o.map((function(n){return'\n            <div class="'.concat(t.join(" "),'" data-day="').concat(n.id,'" data-time="').concat(e,'" data-modal="modal-event">\n                <span class="cancel-event">&times;</span>\n            </div>\n        ')}));return'\n        <div class="row-meeting" data-time="'.concat(e,'">\n            <div class="cell time-cell">').concat(e,":00</div>\n            ").concat(n.join(""),"\n        </div>\n    ")};function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){document.querySelectorAll(".row-meeting").forEach((function(t){e.time===t.dataset.time&&t.querySelectorAll(".meeting-cell").forEach((function(t){t.dataset.day===e.day&&(t.classList.add(r),t.classList.remove(a),t.querySelector(".cancel-event").style.display="inline",t.insertAdjacentHTML("afterbegin",'<span data-type="event-name">'.concat(e.name,"</span>")))}))}))},f=function(){document.querySelectorAll(".row-meeting").forEach((function(e){e.querySelectorAll(".meeting-cell").forEach((function(e){e.classList.remove(r),e.classList.add(a);var t=e.querySelector('[data-type="event-name"]'),n=e.querySelector(".cancel-event");t&&t.remove(),n.style.display="none"}))}))},h=function(){var e={};return localStorage.getItem("eventStore")&&(e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},JSON.parse(localStorage.getItem("eventStore")))),e.events.forEach(v),console.log(e.events),e.events};function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var y="select",b="selected",g="select--open",S="fa-chevron-right",O="fa-chevron-down",j="select__dropdown",w=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];m(this,e),this.elem=document.querySelector(t),this.options=n,this.multi=a,this.selectedId=n.defaultSeleted,this.selectedItems=[]}var t,n;return t=e,(n=[{key:"init",value:function(){this.render(),this.setup()}},{key:"render",value:function(){var e,t,n,a,i=this.options,r=i.label,c=i.data;this.elem.classList.add("select"),this.elem.insertAdjacentHTML("beforeend",(e={label:r,data:c,selectedId:this.selectedId},n=null!==(t=e.defaultValue)&&void 0!==t?t:"Choose option...",a=e.data.map((function(t){var a="";return e.selectedId&&t.id===e.selectedId&&(n=t.value,a=b),'\n            <li class="'.concat(j,"-item ").concat(a,'"\n                data-type="item"\n                data-id="').concat(t.id,'"\n            >\n                ').concat(t.value,"\n            </li>\n        ")})),'        \n            <div class="'.concat(y,'__backdrop" data-type="backdrop"></div>\n            <span class="').concat(y,'__label">').concat(e.label,':</span>\n            <div class="').concat(y,'__wrapper">\n                <div class="').concat(y,'__input" data-type="input" data-action="toggle">\n                    <span data-type="value">').concat(n,'</span>\n                    <span class="fas fa-chevron-right" data-type="arrow"></span>\n                </div>\n                <div class="').concat(j,'">\n                    <ul class="').concat(j,'-list">\n                        ').concat(a.join(""),"\n                    </ul>\n                </div>\n            </div>\n    ")))}},{key:"setup",value:function(){var e=this,t=this.options.data;this.clickHandler=this.clickHandler.bind(this),this.elem.addEventListener("click",this.clickHandler),this.arrow=this.elem.querySelector('[data-type="arrow"]'),this.value=this.elem.querySelector('[data-type="value"]'),this.selectedItems=t.reduce((function(t,n){return n.id===e.selectedId&&t.push(n.value),t}),[])}},{key:"clickHandler",value:function(e){var t=e.target,n=t.dataset.type;t.closest('[data-type="input"]')&&this.toggle(),"item"===n&&(console.log(this.multi),this.multi?this.multiSelect(t.dataset.id):this.select(t.dataset.id)),"backdrop"===n&&this.close()}},{key:"open",value:function(){this.arrow.classList.remove(S),this.arrow.classList.add(O),this.elem.classList.add(g)}},{key:"close",value:function(){this.arrow.classList.remove(O),this.arrow.classList.add(S),this.elem.classList.remove(g),this.selectionResult()}},{key:"select",value:function(e){this.selectedId=e,this.value.textContent=this.current.value,this.elem.querySelectorAll('[data-type="item"]').forEach((function(e){e.classList.remove("selected")})),this.elem.querySelector('[data-id="'.concat(e,'"]')).classList.add("selected"),this.close()}},{key:"multiSelect",value:function(e){this.selectedItems.length<=1&&"All members"===this.selectedItems[0]&&(this.elem.querySelector('[data-id="'.concat(this.selectedId,'"]')).classList.remove(b),this.selectedItems.splice(this.isSelected,1),this.elem.querySelectorAll('[data-type="item"]').forEach((function(e){e.classList.remove(b)}))),this.selectedId=e;var t=this.elem.querySelector('[data-id="'.concat(this.selectedId,'"]'));if("0"===this.selectedId&&!t.classList.contains(b))return console.log(e),this.selectedItems=[],this.selectedItems.push(this.current.value),this.elem.querySelectorAll('[data-type="item"]').forEach((function(e){e.classList.add(b)})),void(this.value.textContent=this.selectedItems.join(", "));this.isSelected<0?(this.selectedItems.push(this.current.value),t.classList.add(b)):(this.selectedItems.splice(this.isSelected,1),t.classList.remove(b)),this.value.textContent=this.selectedItems.join(", ")}},{key:"selectionResult",value:function(){if(!this.options.onSelect)return null;this.multi?this.options.onSelect(this.selectedItems):this.options.onSelect(this.current)}},{key:"toggle",value:function(){this.isOpen?this.close():this.open()}},{key:"destroy",value:function(){this.elem.removeEventListener("click",this.clickHandler),this.elem.textContent=""}},{key:"isOpen",get:function(){return this.elem.classList.contains(g)}},{key:"current",get:function(){var e=this;return this.options.data.find((function(t){return t.id===e.selectedId}))}},{key:"isSelected",get:function(){var e=this;return this.selectedItems.findIndex((function(t){return t===e.current.value}))}}])&&p(t.prototype,n),e}();function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var q={event:{partisipants:[]},isBooked:!1};const P=function(a,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l=a.querySelector("#event-form");a.querySelector(".".concat(e)).textContent="Add Event",a.classList.add(t);for(var d=new w("#participants",{label:"Participants",defaultSeleted:"0",data:[{id:"0",value:"All members"}].concat(E(c)),onSelect:function(e){var t;t=e.length<=1&&e[0]===this.data[0].value?this.data.reduce((function(t,n){return e.forEach((function(e){e!==n.value&&t.push(n)})),t}),[]):this.data.reduce((function(t,n){return e.forEach((function(e){e===n.value&&t.push(n)})),t}),[]),q.event.partisipants=E(t)}},!0),u=new w("#day",{label:"Day",placeholder:"Choose day...",defaultSeleted:r,data:E(o),onSelect:function(e){q.event=I(I({},q.event),{},{day:e.id})}}),f=[],h=10;h<=18;h+=1){var m={id:"".concat(h),value:"".concat(h,":00")};f.push(m)}var p=new w("#time",{label:"Time",placeholder:"Choose time...",defaultSeleted:s,data:f,onSelect:function(e){console.log(e),q.event=I(I({},q.event),{},{time:e.id})}}),y=function(e){e.preventDefault(),d.selectionResult(),u.selectionResult(),p.selectionResult(),E(l.elements).forEach((function(e){(e.matches("input")||e.matches("select"))&&(e.matches("input[type=checkbox]")||(q.event=I(I({},q.event),{},L({},e.name,e.value))))})),i.events.length>0&&i.events.forEach((function(e){e.day===q.event.day&&e.time===q.event.time?q.isBooked=!0:q.isBooked=!1})),q.isBooked?console.log("time is already booked"):(i.events.push(q.event),localStorage.eventStore=JSON.stringify(i),v(q.event),g())},b=function(e){var a=e.target;(a.closest(".".concat(n))||a.classList.contains(t))&&g()};function g(){a.removeEventListener("click",b),l.removeEventListener("submit",y),d.destroy(),u.destroy(),p.destroy(),l.reset(),a.classList.remove(t)}d.init(),u.init(),p.init(),a.addEventListener("click",b),l.addEventListener("submit",y)};function C(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var T={events:[]};!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".calendar-grid",t=document.querySelector(e);t.insertAdjacentHTML("beforeend",s());for(var n=10;n<=18;n+=1)t.insertAdjacentHTML("beforeend",l(n))}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".app",t=document.querySelector(e),n=new w("#filter",{label:"Filter",placeholder:"Choose member...",defaultSeleted:"0",data:[{id:"0",value:"All members"}].concat(C(c)),onSelect:function(e){console.log(e);var t=T.events.reduce((function(t,n){return n.partisipants.forEach((function(a){a.id===e.id&&t.push(n)})),t}),[]);T.filtered=t,f(),console.log(t),t.forEach(v)}});T.events=h(),n.init(),t.addEventListener("click",(function(e){var t=e.target;if(t.closest(".".concat(a))){var n="1",c="9";t.matches(".".concat(i))&&(c=t.dataset.time,n=t.dataset.day);var o=t.dataset.modal,s=document.getElementById(o);P(s,T,n,c)}t.closest("#filter"),t.closest(".".concat(r))&&console.log("remove dialog")}))}()})();